{% extends 'restaurant/base.html' %}
{% load static %}

{% block css %}
<link rel="stylesheet" type="text/css" href="{% static 'restaurant/css/tagsinput.css' %}" />
{% endblock %}


{% block content %}

      <div class="col-md-9 ml-auto">
        <div class="row">
          <div class="right__body__sec">
            <div class="pd-tb-md">
              <div class="rb-pd-rl rs-in-hl">
                <div class="rs-in">
                  <div class="rs-lg">
                    <img src="{% static 'restaurant/images/rest_logo.jpg' %}" alt="" />
                  </div>
                  <div class="rs-in-tx">
                    <div class="rs-nm">Name of the Restarurant</div>
                    <div class="rs-ad">Address Of the Restaurant</div>
                  </div>
                </div>
                <div class="ac-bt-hl">
                  <button class="ac-bt">Edit</button>
                  <!-- <button class="ac-bt">Logout</button> -->
                  <a href="{% url 'logout' %}"><button class="ac-bt">Logout</button></a>
                </div>
              </div>
            </div>
            <div class="rh-bd-tp-m-hl">
              <div class="rb-pd-rl">
                <div class="tp-m">
                  <div class="fr-u">
                    <ul>
                      <li>
                        <a href="#">Overview</a>
                      </li>
                      <li>
                        <a href="{% url 'restaurant:menu-list' request.restaurant.id %}">Menus</a>
                      </li>
                      <li>
                        <a href="{% url 'restaurant:category-list' request.restaurant.id %}">Categories</a>
                      </li>
                      <li class="active">
                        <a href="{% url 'restaurant:menu-add' request.restaurant.id %}">Items</a>
                      </li>
                      <li>
                        <a href="#">Modifire Groups</a>
                      </li>
                    </ul>
                  </div>
                  <div class="fr-pr">
                    <ul>
                      <li>
                        <a href="#"><i class="fa fa-eye" aria-hidden="true"></i>ViewOnline</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
                <!-- right top menu -->
                <div class="it-ad-hl pd-tb-md">
                <div class="rb-pd-rl">
                    <div class="it-ac-hd">
                    <div class="sc-hd">
                        <h1>Add Food Item</h1>
                    </div>
                    </div>
                    <!-- heading -->
                    <div class="ad-fd-fm pd-tb-md">
                        <form method="POST" enctype="multipart/form-data" action="{% if form.instance.name %}{% url 'restaurant:menu-edit' request.restaurant.id foodmenu.id %}{% else %}{% url 'restaurant:menu-add' request.restaurant.id %}{% endif %}">
                            {% csrf_token %}
                            <div class="fm-ls sm-mb">
                                <label>Food Item Name</label>
                                {{ form.name }}
                            </div>
                            <!-- form list restaurant logo button changed-->
                            <div class="rest__logo sm-mb">
                                <div class="fild_inp_logo">
                                <label>Restaurant Logo</label>
                                <input type="file" id="imgInp" name="image" />
                                </div>
                                <div class="logo_pre">
                                <img id="blah" src="#" alt=" Restaurant Image" />
                                </div>
                            </div>
                            <!-- form list ingredients change krave  -->
                            <div class="fm-ls sm-mb">
                                <label>Description</label>
                                {{ form.description }}
                            </div>
                            <div class="fm-ls sm-mb">
                                <label>Ingredients</label>
                                <div class="bootstrap-tagsinput">
                                    {{ form.ingredients }}
                                </div>
                                <!-- <input class="ingd_rest_delt" type="text" data-role="tagsinput" value="" placeholder="Ingredients" name="ingredients" /> -->
                            </div>
                            <!-- form list -->
                            <div class="fm-ls sm-mb">
                                <div class="fm-ls-td js-sb">
                                    <div class="fm-hf-ls">
                                        <label>Old Price</label>
                                        {{ form.old_price }}
                                    </div>
                                    <div class="fm-hf-ls">
                                        <label>New Price</label>
                                        {{ form.new_price }}
                                    </div>
                                </div>
                            </div>

                                <!-- form list -->
                                {{ styleform.management_form }}
                                <div class="fm-ls sm-mb">
                                    <label>Styles that can come with the food item.</label>
                                        <div class="md-gp">
                                            {% for style_single in styleform.forms %}
                                            <div class="md-gp-ls-rd" id="md-gp-ls-rd-id-st">
                                                <div style="display: none;">
                                                    {{ style_single.id }}
                                                </div>
                                                <div class="md-gp-in">
                                                    <div class="md-gp-in-ls">
                                                        <label>Name of style*</label>
                                                        {{ style_single.name_of_style }}
                                                        {% if style_single.name_of_style.errors %}
                                                        {{ style_single.name_of_style.errors }}
                                                        {% endif %}
                                                    </div>
                                                    <div class="md-gp-in-ls">
                                                        <label>Price</label>
                                                        {{ style_single.cost }}
                                                        {% if style_single.cost.errors %}
                                                        {{ style_single.cost.errors }}
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                            {% for error in style_single.errors %}
                                            <p>{{ error }}</p>
                                            {% endfor %}
                                            {% with styleform.empty_form as form %}
                                            <div id="styleempty_form" style="display:none">
                                                <div class="md-gp-ls-rd" id="md-gp-ls-rd-id-st">
                                                    <div class="md-gp-in">
                                                        <div style="display: none;">
                                                            {{ form.id }}
                                                        </div>
                                                        <div class="md-gp-in-ls">
                                                            <label>Name of style*</label>
                                                            {{ form.name_of_style }}
                                                        </div>
                                                        <div class="md-gp-in-ls">
                                                            <label>Price</label>
                                                            {{ form.cost }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            {% endwith %}

                                        {% endfor %}
                                        <button class="md-gp-bt" id="cl-bt-rd">Add More Styles</button>
                                    </div>
                                </div>

                                <!-- form list -->
                                {{ extraform.management_form }}
                                <div class="fm-ls sm-mb">
                                    <label>Extras that can come with the food item.</label>
                                    <div class="md-gp">
                                        {% for extra_single in extraform.forms %}
                                            <div class="md-gp-ls-rd" id="md-gp-ls-rd-id-et">
                                                <div style="display: none;">
                                                    {{ extra_single.id }}
                                                </div>
                                                <div class="md-gp-in">
                                                    <div class="md-gp-in-ls">
                                                        <label>Name of extra*</label>
                                                        {{ extra_single.name_of_extra }}
                                                        {% if extra_single.name_of_extra.errors %}
                                                            {{ extra_single.name_of_extra.errors }}
                                                        {% endif %}
                                                    </div>
                                                    <div class="md-gp-in-ls">
                                                        <label>Price</label>
                                                        {{ extra_single.cost }}
                                                        {% if extra_single.cost.errors %}
                                                            {{ extra_single.cost.errors }}
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                            {% for error in extra_single.errors %}
                                                <p>{{ error }}</p>
                                            {% endfor %}
                                            {% with extraform.empty_form as form %}
                                            <div id="extraempty_form" style="display:none">
                                                <div class="md-gp-ls-rd" id="md-gp-ls-rd-id-et">
                                                    <div class="md-gp-in">
                                                        <div style="display: none;">
                                                            {{ form.id }}
                                                        </div>
                                                        <div class="md-gp-in-ls">
                                                            <label>Name of extra*</label>
                                                            {{ form.name_of_extra }}
                                                        </div>
                                                        <div class="md-gp-in-ls">
                                                            <label>Price</label>
                                                            {{ form.cost }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            {% endwith %}

                                        {% endfor %}
                                        <button class="md-gp-bt" id="cl-bt-rd-et">Add More Extras</button>
                                    </div>
                                </div>

                                <div class="fm-ls sm-mb">
                                    <div class="fm-ls-td js-sb">
                                        <div class="fm-hf-ls">
                                            <label>Choose Category (can be blank)</label>
                                            {{ form.main_category }}
                                            <span>If no suitable category is found, create a restaurant category.</span>
                                        </div>
                                        <div class="fm-hf-ls">
                                            <label>Choose Restaurant Category</label>
                                            {{ form.rest_category }}
                                            <span>Will be seen inside restaurant detail page.</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="fm-ls sm-mb">
                                <div class="fm-ls-td js-sb">
                                    <div class="fm-hf-ls">
                                    <label>Preparation Time</label>
                                    {{ form.preparation_time }}
                                    </div>
                                </div>
                                {% for error in form.errors %}
                                    <p>{{ error }}</p>
                                {% endfor %}
                            </div>
                            <!-- form list -->
                            <div class="fm-ls sm-mb">
                                {% if form.instance.pk %}
                                <button class="sb-bt mx-auto d-flex">Edit Food Item</button>
                                {% else %}
                                <button class="sb-bt mx-auto d-flex">Add Food Item</button>
                                {% endif %}
                              </div>
                        </form>
                    </div>
                </div>
            </div>
            </div>
          <!-- right body part -->
        </div>
      </div>
{% endblock %}


{% block script %}

<script>
  $("#cl-bt-rd").click(function (e) {
      e.preventDefault();
      var $self = $(this);
      var form_idx = $('#id_styleform-TOTAL_FORMS').val();
      var cloneIndexrd = $(".md-gp-ls-rd-st").length;
      $self.before($('#styleempty_form').html().replace(/__prefix__/g, form_idx));
      $('#id_styleform-TOTAL_FORMS').val(parseInt(form_idx) + 1);
  });

  $("#cl-bt-rd-et").click(function (e) {
      e.preventDefault();
      var $self = $(this);
      var form_idx = $('#id_extraform-TOTAL_FORMS').val();
      var cloneIndexrd = $(".md-gp-ls-rd-et").length;
      $self.before($('#extraempty_form').html().replace(/__prefix__/g, form_idx));
      $('#id_extraform-TOTAL_FORMS').val(parseInt(form_idx) + 1);
  });
</script>

{% endblock %}
